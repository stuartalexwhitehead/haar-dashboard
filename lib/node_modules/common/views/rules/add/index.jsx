import React from 'react';
import { connect } from 'react-redux';

import DashboardHeader from 'common/components/dashboard-header';
import RuleForm from 'common/forms/rule-form';
import { addRule } from 'common/actions/rules';

class AddRule extends React.Component {
  static requireAdmin = true;

  static propTypes = {
    dispatch: React.PropTypes.func,
    params: React.PropTypes.object,
  }

  submitCallback = (data) => {
    const { dispatch, params } = this.props;

    return dispatch(addRule({
      segments: params,
      data,
    }));
  }

  render() {
    return (
      <div>
        <DashboardHeader title="Add a Rule" />
        <RuleForm cta="Submit" onSubmit={this.submitCallback} />
      </div>
    );
  }
}

export default connect()(AddRule);
