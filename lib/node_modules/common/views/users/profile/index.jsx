import React from 'react';
import { connect } from 'react-redux';

import DashboardHeader from 'common/components/dashboard-header';
import UserForm from 'common/forms/user-form';

import { editProfile } from 'common/actions/users';

class Profile extends React.Component {
  static requireAdmin = true;

  static propTypes = {
    me: React.PropTypes.object,
    dispatch: React.PropTypes.func,
  };

  handleSubmit = (data) => {
    const { me, dispatch } = this.props;

    return dispatch(editProfile({
      data,
      user: me,
    }));
  }

  render() {
    return (
      <div>
        <DashboardHeader title="Edit Profile" />
        <UserForm
          onSubmit={this.handleSubmit}
          cta="Update"
          initialValues={this.props.me}
        />
      </div>
    );
  }
}

const mapStateToProps = (state) => ({
  me: state.me,
});

export default connect(mapStateToProps)(Profile);
